(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6351:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/NotesPage",function(){return r(5818)}])},5818:function(e,t,r){"use strict";function n(e,t,r,n,i,s,a){try{var o=e[s](a),c=o.value}catch(u){return void r(u)}o.done?t(c):Promise.resolve(c).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,s){var a=e.apply(t,r);function o(e){n(a,i,s,o,c,"next",e)}function c(e){n(a,i,s,o,c,"throw",e)}o(void 0)}))}}r.r(t),r.d(t,{__N_SSP:function(){return k},default:function(){return A}});var s=r(4051),a=r.n(s),o=r(5893),c=(r(7294),r(3015)),u=r(9669),d=r.n(u),l=r(3471);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=r(1121),x=r(4231),g=r(2175),h=r(2920),v=r(7010),y=r(3215);function b(e){var t=x.Ry({title:x.Z_().required("Required").min(5,"Atleast 5 Characters Required"),tag:x.Z_().required("Required").min(5,"Atleast 5 Characters Required"),desc:x.Z_().required("Required").min(10,"Atleast 10 Characters Required")}),r=j(),n=r.mutate,i=r.isLoading;r.isFetching;return(0,o.jsx)("div",{className:"border-2 w-fit h-fit lg:mx-auto m-10 bg-gradient-to-tr from-purple-600 to-rose-600 border-red-500 ",children:(0,o.jsx)("section",{className:"text-gray-200 body-font relative",children:(0,o.jsxs)("div",{className:"container px-5 py-24 mx-auto",children:[(0,o.jsxs)("div",{className:"flex flex-col text-center w-full mb-12",children:[(0,o.jsx)("h1",{className:"sm:text-3xl text-2xl font-medium title-font mb-4 text-white",children:"Contact Us"}),(0,o.jsx)("p",{className:"lg:w-2/3 mx-auto leading-relaxed text-base",children:"Add Your Notes Under Our Clouds And Keep It Safe Behind Our HideOut."})]}),(0,o.jsx)(g.J9,{initialValues:{title:"",tag:"",desc:""},validationSchema:t,onSubmit:function(t){t.token=e.token,n(t)},children:function(e){return(0,o.jsx)(g.l0,{children:(0,o.jsx)("div",{className:"lg:w-1/2 md:w-2/3 mx-auto",children:(0,o.jsxs)("div",{className:"flex flex-wrap -m-2",children:[(0,o.jsx)("div",{className:"p-2 w-1/2",children:(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)(p.Z,{label:"Title",name:"title",id:"title",type:"text",className:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 ring-0 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"})})}),(0,o.jsx)("div",{className:"p-2 w-1/2",children:(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)(p.Z,{type:"text",id:"tag",name:"tag",label:"Tag",className:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 ring-0 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"})})}),(0,o.jsx)("div",{className:"p-2 w-full",children:(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)(y.Z,{name:"desc",label:"Description",type:"text",id:"desc",className:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 h-32 text-base outline-none text-gray-700 py-1 px-3 resize-none leading-6 transition-colors duration-200 ease-in-out"})})}),(0,o.jsx)("div",{className:"p-2 w-full",children:(0,o.jsx)("button",{disabled:e.isValidating||!e.errors,type:"submit",className:"flex mx-auto text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg",children:i?(0,o.jsx)(v.Z,{}):"Add Note"})})]})})})}})]})})})}var N=function(){var e=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d().post("https://polynotes-django-backend.herokuapp.com/auth/v1/NoteAdd/",t,{headers:{Authorization:"Bearer "+String(t.token)}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,l.useQueryClient)();return(0,l.useMutation)(N,{onSuccess:function(){(0,h.Am)("Note Added Succesfully",{position:h.Am.POSITION.TOP_LEFT})},onMutate:function(){var t=i(a().mark((function t(r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.cancelQueries(["UsersNotes"]);case 2:return n=e.getQueryData(["UsersNotes"]),e.setQueryData(["UsersNotes"],(function(e){return m(e).concat([r])})),t.abrupt("return",{previousData:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(t,r){e.setQueryData(["UsersNotes"],r.previousData),h.Am.error("Note Couldnt Be Added Due To NetWork Error")},onSettled:function(){e.invalidateQueries(["UsersNotes"])}})},w=r(6602),k=!0;function A(e){var t=(0,l.useQuery)(["UsersNotes"],(function(){return _(e.cookies.access)}));return t.isError?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.Z,{token:e.cookies.access}),(0,o.jsx)("h1",{className:"my-20 flex justify-center",children:t.error.message})]}):t.isLoading?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.Z,{token:e.cookies.access}),(0,o.jsx)("h1",{className:"my-20 flex justify-center",children:(0,o.jsx)(v.Z,{})})]}):(0,o.jsxs)("div",{className:"z-[-1]",children:[(0,o.jsx)(w.Z,{token:e.cookies.access}),(0,o.jsx)(b,{token:e.cookies.access}),0===t.data.length?(0,o.jsx)("h1",{className:"my-20 flex justify-center",children:"You Have No Notes Yet"}):(0,o.jsx)("div",{className:"z-[-1]",children:(0,o.jsx)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3",children:null===t||void 0===t?void 0:t.data.map((function(t){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(c.Z,{token:e.cookies.access,id:t.id,tag:t.tag,title:t.title,desc:t.desc,datestamp:t.datestamp,timestamp:t.timestamp},t.id)})}))})})]})}var _=function(){var e=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",d().get("https://polynotes-django-backend.herokuapp.com/auth/v1/NoteAdd",{headers:{Authorization:"Bearer "+String(t)}}).then((function(e){return e.data})));case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}()}},function(e){e.O(0,[228,556,927,874,774,888,179],(function(){return t=6351,e(e.s=t);var t}));var t=e.O();_N_E=t}]);